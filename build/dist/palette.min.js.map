{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///../packages/palette/src/palette.vue?9398","webpack:///../packages/palette/util/preventScroll.js","webpack:///../packages/palette/src/palette.vue?28e5","webpack:///../packages/palette/src/palette.vue","webpack:///../packages/palette/src/palette.vue?04dc","webpack:///../packages/palette/src/palette.vue?ecf3","webpack:///./node_modules/_vue-loader@15.9.1@vue-loader/lib/runtime/componentNormalizer.js","webpack:///../packages/palette/index.js"],"names":["root","factory","exports","module","define","amd","a","i","window","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Element","matches","msMatchesSelector","webkitMatchesSelector","closest","el","this","parentElement","parentNode","nodeType","supportsPassive","noop","opts","addEventListener","removeEventListener","e","reachTop","elem","scrollTop","reachBottom","scrollHeight","clientHeight","intentToScrollVert","touch","prevTouch","canScrollHori","deltaX","clientX","deltaY","clientY","Math","abs","getCanScrollHori","clientSizeKey","scrollSizeKey","overflowKey","clientSize","indexOf","getComputedStyle","getCanScroll","called","$ignoreElem","isInsideVConsole","clearup","injectCSS","selector","$style","document","createElement","type","setAttribute","innerText","head","appendChild","preventScroll","ignore","touchStartHandler","target","touches","touchMoveHandler","canScroll","cancelable","preventDefault","touchEndHandler","options","passive","cancel","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","paletteStyleCopy","title","style","borderColor","attrs","on","click","showBar","ref","width","height","borderStyle","borderWidth","isEraser","eraserOptions","size","backgroundColor","isRect","touchstart","$event","stopPropagation","startPoint","touchmove","touchend","endPoint","mousedown","mousemove","mouseup","_e","directives","rawName","touchType","isEdit","expression","closeEdit","showHistory","_l","history","item","index","goHistory","time","text","currentStatus","prevPaint","nextPaint","staticStyle","length","currectHistory","color","showbarOptionCopy","clearBtn","clearPalette","clearTimes","paintRandom","lineBtn","paintLine","hollowIrregularPolygonBtn","paintIrregularPolygon","solidIrregularPolygonBtn","paintCircleBtn","paintCircle","paintRectangleBtn","paintRectangle","paintTextBtn","paintText","eraserBtn","showEraser","saveBtn","isShow","savePalette","imageType","lastBase64","currentTarget","closeImage","src","_withStripped","props","point","String","default","showbarOption","paletteStyle","eraserOption","data","body","clientWidth","defaultColor","defaultLineWidth","cans","ctx","preCurrentStatus","preTouchType","startNew","startOld","move","endPoints","circle","rectangle","isEditing","isHistory","historyTextArr","isShowBar","mounted","assign","init","methods","x","event","y","isPaint","push","beginPath","lineWidth","moveTo","strokeStyle","$refs","palette_wrapper","movePoint","eraser","offsetWidth","offsetHeight","transformKey","lineTo","stroke","cssText","dataset","arc","fillStyle","fill","shift","find","operation","getImageData","slice","canuse","$emit","console","log","forEach","arr","closePath","initpaint","rect","clearRect","putImageData","palette","getContext","toDataURL","$nextTick","clearTimeout","timer","historyBar","component","scriptExports","staticRenderFns","functionalTemplate","injectStyles","scopeId","moduleIdentifier","shadowMode","hook","_compiled","functional","_scopeId","context","$vnode","ssrContext","parent","__VUE_SSR_CONTEXT__","_registeredComponents","add","_ssrRegister","$root","$options","shadowRoot","_injectStyles","originalRender","h","existing","beforeCreate","concat","__file","Palette"],"mappings":"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","file":"palette.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../build/node_modules/_css-loader@3.5.1@css-loader/dist/cjs.js!../../../build/node_modules/_vue-loader@15.9.1@vue-loader/lib/loaders/stylePostLoader.js!../../../build/node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./palette.vue?vue&type=style&index=0&id=b1ebfdb0&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../build/node_modules/_css-loader@3.5.1@css-loader/dist/cjs.js!../../../build/node_modules/_vue-loader@15.9.1@vue-loader/lib/loaders/stylePostLoader.js!../../../build/node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./palette.vue?vue&type=style&index=0&id=b1ebfdb0&scoped=true&lang=css&\"","// polyfill\nif (!Element.prototype.matches) {\n  Element.prototype.matches =\n    Element.prototype.msMatchesSelector ||\n    Element.prototype.webkitMatchesSelector;\n}\n\nif (!Element.prototype.closest) {\n  Element.prototype.closest = function(s) {\n    var el = this;\n\n    do {\n      if (el.matches(s)) return el;\n      el = el.parentElement || el.parentNode;\n    } while (el !== null && el.nodeType === 1);\n    return null;\n  };\n}\n\n// detect supportsPassive\nlet supportsPassive = false;\nfunction noop() {}\ntry {\n  var opts = Object.defineProperty({}, \"passive\", {\n    get: function() {\n      supportsPassive = true;\n      return true;\n    }\n  });\n\n  window.addEventListener(\"testPassive\", noop, opts);\n  window.removeEventListener(\"testPassive\", noop, opts);\n} catch (e) {\n  supportsPassive = false;\n}\n\n// utils fn\nfunction reachTop(elem) {\n  return elem.scrollTop <= 0;\n}\n\nfunction reachBottom(elem) {\n  return elem.scrollHeight - elem.scrollTop <= elem.clientHeight;\n}\n\nfunction intentToScrollVert(touch, prevTouch, canScrollHori) {\n  if (!canScrollHori) {\n    return true;\n  }\n  let deltaX = touch.clientX - prevTouch.clientX;\n  let deltaY = touch.clientY - prevTouch.clientY;\n  let absX = Math.abs(deltaX);\n  let absY = Math.abs(deltaY);\n  return absX < absY;\n}\n\nfunction getCanScroll(elem, clientSizeKey, scrollSizeKey, overflowKey) {\n  const clientSize = elem[clientSizeKey];\n  const scrollSize = elem[scrollSizeKey];\n  if (scrollSize <= clientSize) {\n    return false;\n  }\n  return (\n    [\"hidden\", \"visible\"].indexOf(getComputedStyle(elem)[overflowKey]) === -1\n  );\n}\n\nfunction getCanScrollHori(elem) {\n  return getCanScroll(elem, \"clientWidth\", \"scrollWidth\", \"overflowX\");\n}\n\n// function getCanScrollVert(elem) {\n//   return getCanScroll(elem, 'clientHeight', 'scrollHeight', 'overflowY');\n// }\n\nlet called = false;\nlet prevTouch = null;\nlet $ignoreElem = null;\nlet isInsideVConsole = false;\nlet canScrollHori = false;\n\nfunction clearup() {\n  called = false;\n  prevTouch = null;\n  $ignoreElem = null;\n  isInsideVConsole = false;\n  canScrollHori = false;\n}\n\nfunction injectCSS(selector) {\n  var $style = document.createElement(\"style\");\n  $style.type = \"text/css\";\n  $style.setAttribute(\"data-prevent-scroll\", \"true\");\n  $style.innerText = `${selector} { -webkit-overflow-scrolling: touch; }`;\n  document.head.appendChild($style);\n}\n\nfunction preventScroll({ ignore = \".scrollable\" } = {}) {\n  called = true;\n  injectCSS(ignore);\n\n  function touchStartHandler(e) {\n    if (typeof ignore === \"string\") {\n      $ignoreElem = e.target.closest(ignore);\n      if ($ignoreElem) {\n        canScrollHori = getCanScrollHori($ignoreElem);\n      }\n      let { clientX, clientY } = e.touches[0];\n      prevTouch = { clientX, clientY };\n    }\n    isInsideVConsole = e.target.closest(\"#__vconsole\");\n  }\n\n  function touchMoveHandler(e) {\n    if (isInsideVConsole) {\n      return;\n    }\n    if (typeof ignore === \"string\") {\n      let touch = e.touches[0];\n      let canScroll = true;\n      if (!$ignoreElem) {\n        canScroll = false;\n      } else if (\n        touch.clientY < prevTouch.clientY &&\n        intentToScrollVert(touch, prevTouch, canScrollHori) &&\n        reachBottom($ignoreElem)\n      ) {\n        canScroll = false;\n      } else if (\n        touch.clientY > prevTouch.clientY &&\n        intentToScrollVert(touch, prevTouch, canScrollHori) &&\n        reachTop($ignoreElem)\n      ) {\n        canScroll = false;\n      }\n      prevTouch = {\n        clientX: touch.clientX,\n        clientY: touch.clientY\n      };\n      if (canScroll) {\n        return;\n      }\n    }\n    if (typeof ignore === \"function\" && ignore(e.target)) {\n      return;\n    }\n    if (e.cancelable) {\n      e.preventDefault();\n    }\n  }\n\n  function touchEndHandler() {\n    $ignoreElem = null;\n    isInsideVConsole = false;\n  }\n\n  let options = supportsPassive ? { passive: false } : false;\n  function cancel() {\n    clearup();\n    window.removeEventListener(\"touchstart\", touchStartHandler, options);\n    window.removeEventListener(\"touchmove\", touchMoveHandler, options);\n    window.removeEventListener(\"touchend\", touchEndHandler, options);\n  }\n\n  if (called) {\n    cancel();\n  }\n  window.addEventListener(\"touchstart\", touchStartHandler, options);\n  window.addEventListener(\"touchmove\", touchMoveHandler, options);\n  window.addEventListener(\"touchend\", touchEndHandler, options);\n  return { cancel };\n}\n\nexport default preventScroll;\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", { staticClass: \"palette\" }, [\n    _c(\"p\", { staticClass: \"palette_tip\" }, [\n      _vm._v(\"\\n    \" + _vm._s(_vm.paletteStyleCopy.title) + \"\\n    \"),\n      _c(\n        \"button\",\n        {\n          staticClass: \"tip_btn\",\n          style: \"background-color:\" + _vm.paletteStyleCopy.borderColor + \";\",\n          attrs: { type: \"button\" },\n          on: { click: _vm.showBar }\n        },\n        [_vm._v(\"\\n      编辑面板\\n    \")]\n      )\n    ]),\n    _vm._v(\" \"),\n    _c(\n      \"div\",\n      {\n        ref: \"palette_wrapper\",\n        staticClass: \"palette_wrapper\",\n        style:\n          \"width:\" +\n          _vm.paletteStyleCopy.width +\n          \"px;height:\" +\n          _vm.paletteStyleCopy.height +\n          \"px;border:\" +\n          _vm.paletteStyleCopy.borderStyle +\n          \" \" +\n          _vm.paletteStyleCopy.borderWidth +\n          \"px \" +\n          _vm.paletteStyleCopy.borderColor +\n          \";\"\n      },\n      [\n        _vm.isEraser\n          ? _c(\"div\", {\n              ref: \"eraser\",\n              staticClass: \"eraser\",\n              style:\n                \"width:\" +\n                _vm.eraserOptions.size +\n                \"px;height:\" +\n                _vm.eraserOptions.size +\n                \"px;background-color:\" +\n                _vm.eraserOptions.backgroundColor +\n                \";\" +\n                (_vm.eraserOptions.isRect ? \"\" : \"border-radius:50%;\"),\n              on: {\n                touchstart: function($event) {\n                  $event.stopPropagation()\n                  return _vm.startPoint($event)\n                },\n                touchmove: function($event) {\n                  $event.stopPropagation()\n                },\n                touchend: function($event) {\n                  $event.stopPropagation()\n                  return _vm.endPoint($event)\n                },\n                mousedown: function($event) {\n                  $event.stopPropagation()\n                  return _vm.startPoint($event)\n                },\n                mousemove: function($event) {\n                  $event.stopPropagation()\n                },\n                mouseup: function($event) {\n                  $event.stopPropagation()\n                  return _vm.endPoint($event)\n                }\n              }\n            })\n          : _vm._e(),\n        _vm._v(\" \"),\n        _c(\n          \"div\",\n          {\n            directives: [\n              {\n                name: \"show\",\n                rawName: \"v-show\",\n                value: _vm.touchType == \"PaintCircle\" && _vm.isEdit,\n                expression: \"touchType == 'PaintCircle' && isEdit\"\n              }\n            ],\n            ref: \"circle\",\n            staticClass: \"circle\"\n          },\n          [\n            _c(\n              \"span\",\n              {\n                on: {\n                  click: _vm.closeEdit,\n                  touchstart: function($event) {\n                    $event.stopPropagation()\n                  },\n                  touchend: function($event) {\n                    $event.stopPropagation()\n                  },\n                  mousedown: function($event) {\n                    $event.stopPropagation()\n                  },\n                  mouseup: function($event) {\n                    $event.stopPropagation()\n                  }\n                }\n              },\n              [_vm._v(\"\\n        ×\\n      \")]\n            )\n          ]\n        ),\n        _vm._v(\" \"),\n        _c(\n          \"div\",\n          {\n            directives: [\n              {\n                name: \"show\",\n                rawName: \"v-show\",\n                value: _vm.touchType == \"PaintRectangle\" && _vm.isEdit,\n                expression: \"touchType == 'PaintRectangle' && isEdit\"\n              }\n            ],\n            ref: \"rectangle\",\n            staticClass: \"rectangle\"\n          },\n          [\n            _c(\n              \"span\",\n              {\n                on: {\n                  click: _vm.closeEdit,\n                  touchstart: function($event) {\n                    $event.stopPropagation()\n                  },\n                  touchend: function($event) {\n                    $event.stopPropagation()\n                  },\n                  mousedown: function($event) {\n                    $event.stopPropagation()\n                  },\n                  mouseup: function($event) {\n                    $event.stopPropagation()\n                  }\n                }\n              },\n              [_vm._v(\"\\n        ×\\n      \")]\n            )\n          ]\n        ),\n        _vm._v(\" \"),\n        _c(\"canvas\", {\n          ref: \"palette\",\n          attrs: {\n            width:\n              _vm.paletteStyleCopy.width - 2 * _vm.paletteStyleCopy.borderWidth,\n            height:\n              _vm.paletteStyleCopy.height - 2 * _vm.paletteStyleCopy.borderWidth\n          }\n        })\n      ]\n    ),\n    _vm._v(\" \"),\n    _c(\"div\", { ref: \"historyBar\", staticClass: \"historyBar\" }, [\n      _c(\n        \"div\",\n        { staticClass: \"historyBar_close\", on: { click: _vm.showHistory } },\n        [_vm._v(\"×\")]\n      ),\n      _vm._v(\" \"),\n      _c(\"p\", { staticClass: \"historyBar_title\" }, [_vm._v(\"所有操作记录\")]),\n      _vm._v(\" \"),\n      _c(\n        \"div\",\n        { staticClass: \"history_wrapper scrollable\" },\n        _vm._l(_vm.history, function(item, index) {\n          return _c(\n            \"div\",\n            {\n              key: index,\n              staticClass: \"history_item\",\n              on: {\n                click: function($event) {\n                  return _vm.goHistory(index)\n                }\n              }\n            },\n            [\n              _vm._v(\n                \"\\n        \" +\n                  _vm._s(item.time) +\n                  _vm._s(item.text) +\n                  \"\\n      \"\n              )\n            ]\n          )\n        }),\n        0\n      ),\n      _vm._v(\" \"),\n      _c(\"div\", { staticClass: \"more\" })\n    ]),\n    _vm._v(\" \"),\n    _c(\"div\", { ref: \"showBar\", staticClass: \"showBar\" }, [\n      _c(\"div\", { staticClass: \"showBar_close\", on: { click: _vm.showBar } }, [\n        _vm._v(\"×\")\n      ]),\n      _vm._v(\" \"),\n      _c(\"p\", { staticClass: \"showBar_title\" }, [\n        _vm._v(\"当前画笔状态：\" + _vm._s(_vm.currentStatus))\n      ]),\n      _vm._v(\" \"),\n      _c(\"div\", { staticClass: \"showBar_wrapper scrollable\" }, [\n        _c(\"div\", { staticClass: \"showBar_item\" }, [\n          _c(\n            \"button\",\n            { attrs: { type: \"button\" }, on: { click: _vm.prevPaint } },\n            [_vm._v(\"\\n          回撤\\n        \")]\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"button\",\n            { attrs: { type: \"button\" }, on: { click: _vm.nextPaint } },\n            [_vm._v(\"\\n          前进\\n        \")]\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"span\",\n            {\n              staticStyle: { \"font-size\": \"14px\" },\n              on: { click: _vm.showHistory }\n            },\n            [\n              _vm._v(\n                \"\\n          共有\" +\n                  _vm._s(_vm.history.length) +\n                  \"条记录，当前第\" +\n                  _vm._s(_vm.currectHistory + 1) +\n                  \"条\\n          \"\n              ),\n              _c(\"span\", { staticStyle: { color: \"#fed640\" } }, [_vm._v(\">>\")])\n            ]\n          )\n        ]),\n        _vm._v(\" \"),\n        _vm.showbarOptionCopy.clearBtn\n          ? _c(\"div\", { staticClass: \"showBar_item\" }, [\n              _c(\n                \"button\",\n                { attrs: { type: \"button\" }, on: { click: _vm.clearPalette } },\n                [_vm._v(\"\\n          清除\\n        \")]\n              ),\n              _vm._v(\" \"),\n              _c(\"span\", [_vm._v(\"当前清理次数\" + _vm._s(_vm.clearTimes))])\n            ])\n          : _vm._e(),\n        _vm._v(\" \"),\n        _c(\"div\", { staticClass: \"showBar_item\" }, [\n          _c(\n            \"button\",\n            { attrs: { type: \"button\" }, on: { click: _vm.paintRandom } },\n            [_vm._v(\"\\n          普通画笔\\n        \")]\n          )\n        ]),\n        _vm._v(\" \"),\n        _vm.showbarOptionCopy.lineBtn\n          ? _c(\"div\", { staticClass: \"showBar_item\" }, [\n              _c(\n                \"button\",\n                { attrs: { type: \"button\" }, on: { click: _vm.paintLine } },\n                [_vm._v(\"\\n          直线画笔\\n        \")]\n              )\n            ])\n          : _vm._e(),\n        _vm._v(\" \"),\n        _vm.showbarOptionCopy.hollowIrregularPolygonBtn\n          ? _c(\"div\", { staticClass: \"showBar_item\" }, [\n              _c(\n                \"button\",\n                {\n                  attrs: { type: \"button\" },\n                  on: {\n                    click: function($event) {\n                      return _vm.paintIrregularPolygon(\"Hollow\")\n                    }\n                  }\n                },\n                [_vm._v(\"\\n          空心不规则多边形画笔\\n        \")]\n              )\n            ])\n          : _vm._e(),\n        _vm._v(\" \"),\n        _vm.showbarOptionCopy.solidIrregularPolygonBtn\n          ? _c(\"div\", { staticClass: \"showBar_item\" }, [\n              _c(\n                \"button\",\n                {\n                  attrs: { type: \"button\" },\n                  on: {\n                    click: function($event) {\n                      return _vm.paintIrregularPolygon(\"Solid\")\n                    }\n                  }\n                },\n                [_vm._v(\"\\n          实心不规则多边形画笔\\n        \")]\n              )\n            ])\n          : _vm._e(),\n        _vm._v(\" \"),\n        _vm.showbarOptionCopy.paintCircleBtn\n          ? _c(\"div\", { staticClass: \"showBar_item\" }, [\n              _c(\n                \"button\",\n                { attrs: { type: \"button\" }, on: { click: _vm.paintCircle } },\n                [_vm._v(\"\\n          圆形画笔\\n        \")]\n              )\n            ])\n          : _vm._e(),\n        _vm._v(\" \"),\n        _vm.showbarOptionCopy.paintRectangleBtn\n          ? _c(\"div\", { staticClass: \"showBar_item\" }, [\n              _c(\n                \"button\",\n                {\n                  attrs: { type: \"button\" },\n                  on: { click: _vm.paintRectangle }\n                },\n                [_vm._v(\"\\n          矩形画笔\\n        \")]\n              )\n            ])\n          : _vm._e(),\n        _vm._v(\" \"),\n        _vm.showbarOptionCopy.paintTextBtn\n          ? _c(\"div\", { staticClass: \"showBar_item\" }, [\n              _c(\n                \"button\",\n                { attrs: { type: \"button\" }, on: { click: _vm.paintText } },\n                [_vm._v(\"\\n          插入文字\\n        \")]\n              )\n            ])\n          : _vm._e(),\n        _vm._v(\" \"),\n        _vm.showbarOptionCopy.eraserBtn\n          ? _c(\"div\", { staticClass: \"showBar_item\" }, [\n              _c(\n                \"button\",\n                { attrs: { type: \"button\" }, on: { click: _vm.showEraser } },\n                [_vm._v(\"\\n          橡皮擦\\n        \")]\n              )\n            ])\n          : _vm._e(),\n        _vm._v(\" \"),\n        _vm.showbarOptionCopy.saveBtn.isShow\n          ? _c(\"div\", { staticClass: \"showBar_item\" }, [\n              _vm.showbarOptionCopy.saveBtn.isShow\n                ? _c(\n                    \"button\",\n                    {\n                      attrs: { type: \"button\" },\n                      on: {\n                        click: function($event) {\n                          return _vm.savePalette(\n                            _vm.showbarOptionCopy.saveBtn.imageType\n                          )\n                        }\n                      }\n                    },\n                    [_vm._v(\"\\n          生成图片\\n        \")]\n                  )\n                : _vm._e()\n            ])\n          : _vm._e()\n      ])\n    ]),\n    _vm._v(\" \"),\n    _vm.lastBase64\n      ? _c(\n          \"div\",\n          {\n            staticClass: \"images\",\n            on: {\n              click: function($event) {\n                if ($event.target !== $event.currentTarget) {\n                  return null\n                }\n                return _vm.closeImage($event)\n              }\n            }\n          },\n          [_c(\"img\", { ref: \"resultImg\", attrs: { src: _vm.lastBase64 } })]\n        )\n      : _vm._e()\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"palette\">\r\n    <p class=\"palette_tip\">\r\n      {{ paletteStyleCopy.title }}\r\n      <button\r\n        type=\"button\"\r\n        class=\"tip_btn\"\r\n        @click=\"showBar\"\r\n        :style=\"`background-color:${paletteStyleCopy.borderColor};`\"\r\n      >\r\n        编辑面板\r\n      </button>\r\n    </p>\r\n    <div\r\n      class=\"palette_wrapper\"\r\n      ref=\"palette_wrapper\"\r\n      :style=\"\r\n        `width:${paletteStyleCopy.width}px;height:${paletteStyleCopy.height}px;border:${paletteStyleCopy.borderStyle} ${paletteStyleCopy.borderWidth}px ${paletteStyleCopy.borderColor};`\r\n      \"\r\n    >\r\n      <div\r\n        class=\"eraser\"\r\n        @touchstart.stop=\"startPoint\"\r\n        @touchmove.stop\r\n        @touchend.stop=\"endPoint\"\r\n        @mousedown.stop=\"startPoint\"\r\n        @mousemove.stop\r\n        @mouseup.stop=\"endPoint\"\r\n        ref=\"eraser\"\r\n        v-if=\"isEraser\"\r\n        :style=\"\r\n          `width:${eraserOptions.size}px;height:${\r\n            eraserOptions.size\r\n          }px;background-color:${eraserOptions.backgroundColor};${\r\n            eraserOptions.isRect ? '' : 'border-radius:50%;'\r\n          }`\r\n        \"\r\n      ></div>\r\n      <!-- 圆编辑框 -->\r\n      <div\r\n        class=\"circle\"\r\n        ref=\"circle\"\r\n        v-show=\"touchType == 'PaintCircle' && isEdit\"\r\n      >\r\n        <span\r\n          @click=\"closeEdit\"\r\n          @touchstart.stop\r\n          @touchend.stop\r\n          @mousedown.stop\r\n          @mouseup.stop\r\n        >\r\n          &times;\r\n        </span>\r\n      </div>\r\n\r\n      <!-- 矩形编辑框 -->\r\n      <div\r\n        class=\"rectangle\"\r\n        ref=\"rectangle\"\r\n        v-show=\"touchType == 'PaintRectangle' && isEdit\"\r\n      >\r\n        <span\r\n          @click=\"closeEdit\"\r\n          @touchstart.stop\r\n          @touchend.stop\r\n          @mousedown.stop\r\n          @mouseup.stop\r\n        >\r\n          &times;\r\n        </span>\r\n      </div>\r\n      <canvas\r\n        ref=\"palette\"\r\n        :width=\"paletteStyleCopy.width - 2 * paletteStyleCopy.borderWidth\"\r\n        :height=\"paletteStyleCopy.height - 2 * paletteStyleCopy.borderWidth\"\r\n      ></canvas>\r\n    </div>\r\n    <!-- 历史记录 -->\r\n    <div class=\"historyBar\" ref=\"historyBar\">\r\n      <div class=\"historyBar_close\" @click=\"showHistory\">&times;</div>\r\n      <p class=\"historyBar_title\">所有操作记录</p>\r\n      <div class=\"history_wrapper scrollable\">\r\n        <div\r\n          class=\"history_item\"\r\n          v-for=\"(item, index) in history\"\r\n          :key=\"index\"\r\n          @click=\"goHistory(index)\"\r\n        >\r\n          {{ item.time }}{{ item.text }}\r\n        </div>\r\n      </div>\r\n      <div class=\"more\"></div>\r\n    </div>\r\n    <!-- 编辑画板 -->\r\n    <div class=\"showBar\" ref=\"showBar\">\r\n      <div class=\"showBar_close\" @click=\"showBar\">&times;</div>\r\n      <p class=\"showBar_title\">当前画笔状态：{{ currentStatus }}</p>\r\n      <div class=\"showBar_wrapper scrollable\">\r\n        <div class=\"showBar_item\">\r\n          <button type=\"button\" @click=\"prevPaint\">\r\n            回撤\r\n          </button>\r\n          <button type=\"button\" @click=\"nextPaint\">\r\n            前进\r\n          </button>\r\n          <span style=\"font-size:14px;\" @click=\"showHistory\">\r\n            共有{{ history.length }}条记录，当前第{{ currectHistory + 1 }}条\r\n            <span style=\"color:#fed640;\">>></span>\r\n          </span>\r\n        </div>\r\n        <div v-if=\"showbarOptionCopy.clearBtn\" class=\"showBar_item\">\r\n          <button type=\"button\" @click=\"clearPalette\">\r\n            清除\r\n          </button>\r\n          <span>当前清理次数{{ clearTimes }}</span>\r\n        </div>\r\n        <div class=\"showBar_item\">\r\n          <button type=\"button\" @click=\"paintRandom\">\r\n            普通画笔\r\n          </button>\r\n        </div>\r\n        <div v-if=\"showbarOptionCopy.lineBtn\" class=\"showBar_item\">\r\n          <button type=\"button\" @click=\"paintLine\">\r\n            直线画笔\r\n          </button>\r\n        </div>\r\n        <div\r\n          class=\"showBar_item\"\r\n          v-if=\"showbarOptionCopy.hollowIrregularPolygonBtn\"\r\n        >\r\n          <button type=\"button\" @click=\"paintIrregularPolygon('Hollow')\">\r\n            空心不规则多边形画笔\r\n          </button>\r\n        </div>\r\n        <div\r\n          class=\"showBar_item\"\r\n          v-if=\"showbarOptionCopy.solidIrregularPolygonBtn\"\r\n        >\r\n          <button type=\"button\" @click=\"paintIrregularPolygon('Solid')\">\r\n            实心不规则多边形画笔\r\n          </button>\r\n        </div>\r\n        <div class=\"showBar_item\" v-if=\"showbarOptionCopy.paintCircleBtn\">\r\n          <button type=\"button\" @click=\"paintCircle\">\r\n            圆形画笔\r\n          </button>\r\n        </div>\r\n        <div class=\"showBar_item\" v-if=\"showbarOptionCopy.paintRectangleBtn\">\r\n          <button type=\"button\" @click=\"paintRectangle\">\r\n            矩形画笔\r\n          </button>\r\n        </div>\r\n        <div class=\"showBar_item\" v-if=\"showbarOptionCopy.paintTextBtn\">\r\n          <button type=\"button\" @click=\"paintText\">\r\n            插入文字\r\n          </button>\r\n        </div>\r\n        <div class=\"showBar_item\" v-if=\"showbarOptionCopy.eraserBtn\">\r\n          <button type=\"button\" @click=\"showEraser\">\r\n            橡皮擦\r\n          </button>\r\n        </div>\r\n        <div v-if=\"showbarOptionCopy.saveBtn.isShow\" class=\"showBar_item\">\r\n          <button\r\n            type=\"button\"\r\n            @click=\"savePalette(showbarOptionCopy.saveBtn.imageType)\"\r\n            v-if=\"showbarOptionCopy.saveBtn.isShow\"\r\n          >\r\n            生成图片\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- 生成图片 -->\r\n    <div class=\"images\" @click.self=\"closeImage\" v-if=\"lastBase64\">\r\n      <img :src=\"lastBase64\" ref=\"resultImg\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nconst transformKey =\r\n  document.body.style.transform === undefined\r\n    ? '-webkit-transform'\r\n    : 'transform';\r\n// const documentWidth = document.body.clientWidth - 20;\r\n// const documentHeight = document.body.clientHeight - 75;//window.devicePixelRatio\r\n// console.log(document.body.clientHeight);\r\nexport default {\r\n  name: 'palette',\r\n  props: {\r\n    point: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    // 展板显示的工具\r\n    showbarOption: {\r\n      type: Object,\r\n      default: () => {\r\n        return {};\r\n      }\r\n    },\r\n    // 画板基础样式\r\n    paletteStyle: {\r\n      type: Object,\r\n      default: () => {\r\n        return {};\r\n      }\r\n    },\r\n    // 橡皮擦样式\r\n    eraserOption: {\r\n      type: Object,\r\n      default: () => {\r\n        return {};\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      paletteStyleCopy: {\r\n        title: `Nangxi's drawing board`,\r\n        width: document.body.clientWidth - 20,\r\n        height: document.body.clientHeight - 75,\r\n        backgroundColor: 'white',\r\n        borderStyle: 'solid',\r\n        borderColor: '#fed640',\r\n        borderWidth: 5,\r\n        defaultColor: 'black', // 全局默认颜色\r\n        defaultLineWidth: 2 // 全局默认线条宽度\r\n      },\r\n      showbarOptionCopy: {\r\n        clearBtn: true,\r\n        saveBtn: {\r\n          isShow: true,\r\n          imageType: 'png'\r\n        },\r\n        lineBtn: true,\r\n        hollowIrregularPolygonBtn: true,\r\n        solidIrregularPolygonBtn: true,\r\n        paintCircleBtn: true,\r\n        paintRectangleBtn: true,\r\n        // paintTextBtn: false,\r\n        eraserBtn: true\r\n      },\r\n      cans: null,\r\n      ctx: null,\r\n      currentStatus: '普通画笔', //画笔状态\r\n      touchType: 'Random',\r\n      preCurrentStatus: '',\r\n      preTouchType: '',\r\n      startNew: null, //当前点击的点\r\n      startOld: [], //存放之前点过的历史点\r\n      move: {}, //移动的点\r\n      endPoints: [], //该数组只存放最后两个结束的点，用于确定圆心或者矩形画完之后，有没有被移动过，进而确定圆心等用的是哪个数据\r\n      circle: null,\r\n      rectangle: null,\r\n      text: null,\r\n      isEdit: false, //是否显示编辑框\r\n      isEditing: false, //是否进入编辑状态，编辑状态的时候不能重新绘画其他东西\r\n      isEraser: false,\r\n      eraserOptions: {\r\n        size: 20,\r\n        backgroundColor: 'black',\r\n        isRect: false //是否是圆形的\r\n      },\r\n      isHistory: false, //是否显示历史记录\r\n      history: [], //存放历史操作数组\r\n      historyTextArr: [\r\n        { operation: 'Random', text: '画了一条不规则线' },\r\n        { operation: 'PaintCircle', text: '画了一个圆' },\r\n        { operation: 'PaintRectangle', text: '画了一个矩形' },\r\n        { operation: 'PaintText', text: '插入文本' },\r\n        { operation: 'Eraser', text: '擦除画板' }\r\n      ],\r\n      currectHistory: -1, //当前所在历史位置\r\n      isShowBar: false,\r\n      clearTimes: 0,\r\n      lastBase64: '' //最后生成的图片\r\n    };\r\n  },\r\n  mounted() {\r\n    Object.assign(this.paletteStyleCopy, this.paletteStyle);\r\n    Object.assign(this.showbarOptionCopy, this.showbarOption);\r\n    Object.assign(this.eraserOptions, this.eraserOption);\r\n    this.init();\r\n  },\r\n  methods: {\r\n    // 手绘\r\n    startPoint(e) {\r\n      const event = e || window.event;\r\n      // 点击的时候，确认最先触摸的屏幕点\r\n      this.startNew = {\r\n        x: event.clientX\r\n          ? event.clientX - this.$refs.palette.getBoundingClientRect().left\r\n          : event.targetTouches[0].clientX -\r\n            this.$refs.palette.getBoundingClientRect().left,\r\n        y: event.clientY\r\n          ? event.clientY - this.$refs.palette.getBoundingClientRect().top\r\n          : event.targetTouches[0].clientY -\r\n            this.$refs.palette.getBoundingClientRect().top,\r\n        isPaint: false\r\n      };\r\n      // 然后立马存放进历史\r\n      this.startOld.push(this.startNew);\r\n      // 如果在触摸或者鼠标按下的时候是随机线的状态\r\n      if (this.touchType == 'Random' || this.touchType == 'Eraser') {\r\n        this.ctx.beginPath();\r\n        this.ctx.lineWidth = this.paletteStyleCopy.defaultLineWidth;\r\n        this.ctx.moveTo(this.startNew.x, this.startNew.y);\r\n        if (this.touchType == 'Eraser') {\r\n          this.ctx.lineWidth = this.eraserOptions.size;\r\n          this.ctx.strokeStyle = this.paletteStyleCopy.backgroundColor;\r\n        } else {\r\n          this.ctx.lineWidth = this.paletteStyleCopy.defaultLineWidth;\r\n          this.ctx.strokeStyle = this.paletteStyleCopy.defaultColor;\r\n        }\r\n      }\r\n      // 如果在触摸或者鼠标按下的时候是画圆的状态\r\n      if (this.touchType == 'PaintCircle' && !this.isEditing) {\r\n        // 定义初始圆的圆心位置\r\n        this.circle.style[\r\n          transformKey\r\n        ] = `translate3d(${this.startNew.x}px,${this.startNew.y}px,0)`;\r\n        this.isEdit = true;\r\n      }\r\n      // 如果在触摸或者鼠标按下的时候是画矩形的状态\r\n      if (this.touchType == 'PaintRectangle' && !this.isEditing) {\r\n        this.isEdit = true;\r\n        // 定义初始矩形左上角位置\r\n        this.rectangle.style[\r\n          transformKey\r\n        ] = `translate3d(${this.startNew.x}px,${this.startNew.y}px,0)`;\r\n      }\r\n\r\n      // if (this.touchType == 'PaintText') {\r\n      //   this.isEdit = true;\r\n      //   this.text = document.createElement('div');\r\n      //   this.text.className = 'text';\r\n      //   this.text.setAttribute('contenteditable', 'true');\r\n      //   this.text.style[\r\n      //     transformKey\r\n      //   ] = `translate3d(${this.startNew.x}px,${this.startNew.y}px,0)`;\r\n      //   this.$refs.palette_wrapper.appendChild(this.text);\r\n      //   this.$refs.palette_wrapper.removeEventListener(\r\n      //     'touchstart',\r\n      //     this.startPoint,\r\n      //     false\r\n      //   );\r\n      //   this.$refs.palette_wrapper.removeEventListener(\r\n      //     'mousedown',\r\n      //     this.startPoint,\r\n      //     false\r\n      //   );\r\n      // }\r\n      this.$refs.palette_wrapper.addEventListener(\r\n        'touchmove',\r\n        this.movePoint,\r\n        false\r\n      );\r\n      this.$refs.palette_wrapper.addEventListener(\r\n        'mousemove',\r\n        this.movePoint,\r\n        false\r\n      );\r\n    },\r\n    movePoint(e) {\r\n      const event = e || window.event;\r\n      // this.startNew = null;\r\n\r\n      // 如果鼠标按下或者触摸事件被触发，那么isPaint就不能为false，因为这个点不可能成为不规则折线的折点了\r\n      // 这一块，谷歌浏览器的mousedown和mousemove一起执行了，很奇怪，所以通过判断mousedown和mousemove的位置是否相同来判断是否真正触发mousemove\r\n      if (this.startNew.x != this.move.x || this.startNew.y != this.move.y) {\r\n        this.startOld[this.startOld.length - 1].isPaint = true;\r\n        // 当鼠标或者手指真正发生移动的时候，才能开始给移动坐标数组添加数据\r\n        this.move = {\r\n          x: event.clientX\r\n            ? event.clientX - this.$refs.palette.getBoundingClientRect().left\r\n            : event.targetTouches[0].clientX -\r\n              this.$refs.palette.getBoundingClientRect().left,\r\n          y: event.clientY\r\n            ? event.clientY - this.$refs.palette.getBoundingClientRect().top\r\n            : event.targetTouches[0].clientY -\r\n              this.$refs.palette.getBoundingClientRect().top\r\n        };\r\n      }\r\n      if (this.touchType == 'Random' || this.touchType == 'Eraser') {\r\n        // 任意的线条跟橡皮擦的逻辑是一样的，只是橡皮擦的颜色跟背景色要相同，而且橡皮擦不能让它超出范围\r\n        if (this.touchType == 'Eraser') {\r\n          // 橡皮擦不能让它超出范围\r\n          if (this.move.x <= this.$refs.eraser.offsetWidth / 2) {\r\n            this.move.x = this.$refs.eraser.offsetWidth / 2;\r\n          }\r\n          if (this.move.y <= this.$refs.eraser.offsetHeight / 2) {\r\n            this.move.y = this.$refs.eraser.offsetHeight / 2;\r\n          }\r\n          if (\r\n            this.move.x >=\r\n            this.paletteStyleCopy.width -\r\n              2 * this.paletteStyleCopy.borderWidth -\r\n              this.$refs.eraser.offsetWidth / 2\r\n          ) {\r\n            this.move.x =\r\n              this.paletteStyleCopy.width -\r\n              2 * this.paletteStyleCopy.borderWidth -\r\n              this.$refs.eraser.offsetWidth / 2;\r\n          }\r\n\r\n          if (\r\n            this.move.y >=\r\n            this.paletteStyleCopy.height -\r\n              2 * this.paletteStyleCopy.borderWidth -\r\n              this.$refs.eraser.offsetHeight / 2\r\n          ) {\r\n            this.move.y =\r\n              this.paletteStyleCopy.height -\r\n              2 * this.paletteStyleCopy.borderWidth -\r\n              this.$refs.eraser.offsetHeight / 2;\r\n          }\r\n          this.$refs.eraser.style[transformKey] = `translate3d(${this.move.x -\r\n            this.eraserOptions.size / 2}px,${this.move.y -\r\n            this.eraserOptions.size / 2}px,0)`;\r\n        }\r\n        this.ctx.lineTo(this.move.x, this.move.y);\r\n        this.ctx.stroke();\r\n      }\r\n      if (this.touchType == 'PaintCircle' && !this.isEditing) {\r\n        // 如果圆未处于编辑状态，那么可以调整圆的大小\r\n        let r =\r\n          Math.abs(this.startNew.x - this.move.x) >\r\n          Math.abs(this.startNew.y - this.move.y)\r\n            ? Math.abs(this.startNew.x - this.move.x)\r\n            : Math.abs(this.startNew.y - this.move.y);\r\n        this.circle.style.cssText = `${transformKey}:translate3d(${this.startNew\r\n          .x - r}px,${this.startNew.y - r}px,0);width:${2 * r}px;height:${2 *\r\n          r}px;`;\r\n      } else if (this.touchType == 'PaintCircle' && this.isEditing) {\r\n        // 如果处于编辑状态，那么只能调整位置\r\n        this.circle.style[transformKey] = `translate3d(${this.move.x -\r\n          this.circle.offsetWidth / 2}px,${this.move.y -\r\n          this.circle.offsetWidth / 2}px,0)`;\r\n      }\r\n\r\n      // 正方形的拖动分四个角的拖动\r\n      if (this.touchType == 'PaintRectangle' && !this.isEditing) {\r\n        this.rectangle.style.width = `${Math.abs(\r\n          this.startNew.x - this.move.x\r\n        )}px`;\r\n        this.rectangle.style.height = `${Math.abs(\r\n          this.startNew.y - this.move.y\r\n        )}px`;\r\n        if (this.startNew.x - this.move.x <= 0) {\r\n          if (this.startNew.y - this.move.y > 0) {\r\n            this.rectangle.style[\r\n              transformKey\r\n            ] = `translate3d(${this.startNew.x}px,${this.move.y}px,0)`;\r\n            this.rectangle.dataset.x = this.startNew.x;\r\n            this.rectangle.dataset.y = this.move.y;\r\n          } else {\r\n            this.rectangle.dataset.x = this.startNew.x;\r\n            this.rectangle.dataset.y = this.startNew.y;\r\n          }\r\n        } else {\r\n          if (this.startNew.y - this.move.y > 0) {\r\n            this.rectangle.style[\r\n              transformKey\r\n            ] = `translate3d(${this.move.x}px,${this.move.y}px,0)`;\r\n            this.rectangle.dataset.x = this.move.x;\r\n            this.rectangle.dataset.y = this.move.y;\r\n          } else {\r\n            this.rectangle.style[\r\n              transformKey\r\n            ] = `translate3d(${this.move.x}px,${this.startNew.y}px,0)`;\r\n            this.rectangle.dataset.x = this.move.x;\r\n            this.rectangle.dataset.y = this.startNew.y;\r\n          }\r\n        }\r\n      } else if (this.touchType == 'PaintRectangle' && this.isEditing) {\r\n        this.rectangle.style[transformKey] = `translate3d(${this.move.x -\r\n          this.rectangle.offsetWidth}px,${this.move.y -\r\n          this.rectangle.offsetHeight}px,0)`;\r\n      }\r\n\r\n      // if (this.touchType == 'PaintText') {\r\n      //   this.text.style.width = `${Math.abs(this.startNew.x - this.move.x)}px`;\r\n      //   this.text.style.height = `${Math.abs(this.startNew.y - this.move.y)}px`;\r\n      // }\r\n    },\r\n    endPoint() {\r\n      if (this.touchType == 'Random') {\r\n        if (this.startNew) {\r\n          this.ctx.beginPath();\r\n          this.ctx.strokeStyle = this.paletteStyleCopy.defaultColor;\r\n\r\n          this.ctx.arc(\r\n            this.startNew.x,\r\n            this.startNew.y,\r\n            this.paletteStyleCopy.defaultLineWidth / 2,\r\n            0,\r\n            360,\r\n            false\r\n          );\r\n          this.ctx.fillStyle = this.paletteStyleCopy.defaultColor;\r\n          this.ctx.fill();\r\n        }\r\n      }\r\n      if (this.touchType == 'PaintCircle') {\r\n        this.isEdit = true;\r\n        this.isEditing = true;\r\n      }\r\n      if (this.touchType == 'PaintRectangle') {\r\n        this.isEdit = true;\r\n        this.isEditing = true;\r\n      }\r\n      if (this.isEditing) {\r\n        // 说明画圆或矩形之后没有移动\r\n        if (this.endPoints.length <= 1) {\r\n          this.endPoints = [this.move, this.move];\r\n        } else {\r\n          this.endPoints.shift();\r\n          this.endPoints.push(this.move);\r\n        }\r\n      }\r\n\r\n      this.startNew = null;\r\n      this.$refs.palette_wrapper.removeEventListener(\r\n        'touchmove',\r\n        this.movePoint,\r\n        false\r\n      );\r\n      this.$refs.palette_wrapper.removeEventListener(\r\n        'mousemove',\r\n        this.movePoint,\r\n        false\r\n      );\r\n\r\n      if (\r\n        this.touchType !== 'PaintCircle' &&\r\n        this.touchType !== 'PaintRectangle'\r\n      ) {\r\n        this.currectHistory++;\r\n        let t = new Date();\r\n        if (this.currectHistory == this.history.length) {\r\n          this.history.push({\r\n            time: `${t.getHours() < 10 ? '0' + t.getHours() : t.getHours()}:${\r\n              t.getMinutes() < 10 ? '0' + t.getMinutes() : t.getMinutes()\r\n            }:${t.getSeconds() < 10 ? '0' + t.getSeconds() : t.getSeconds()}`,\r\n            text: this.historyTextArr.find(item => {\r\n              return item.operation == this.touchType;\r\n            }).text,\r\n            data: this.ctx.getImageData(\r\n              0,\r\n              0,\r\n              this.paletteStyleCopy.width -\r\n                2 * this.paletteStyleCopy.borderWidth,\r\n              this.paletteStyleCopy.height -\r\n                2 * this.paletteStyleCopy.borderWidth\r\n            )\r\n          });\r\n        } else {\r\n          // 如果当前所在位置不是最后一条历史记录，而且还重新操作了，那么后面的历史记录要清除\r\n          this.history = this.history.slice(this.currectHistory).push({\r\n            time: `${t.getHours() < 10 ? '0' + t.getHours() : t.getHours()}:${\r\n              t.getMinutes() < 10 ? '0' + t.getMinutes() : t.getMinutes()\r\n            }:${t.getSeconds() < 10 ? '0' + t.getSeconds() : t.getSeconds()}`,\r\n            text: this.historyTextArr.find(item => {\r\n              return item.operation == this.touchType;\r\n            }).text,\r\n            data: this.ctx.getImageData(\r\n              0,\r\n              0,\r\n              this.paletteStyleCopy.width -\r\n                2 * this.paletteStyleCopy.borderWidth,\r\n              this.paletteStyleCopy.height -\r\n                2 * this.paletteStyleCopy.borderWidth\r\n            )\r\n          });\r\n        }\r\n      }\r\n    },\r\n    // 画直线\r\n    paintLine() {\r\n      // 这里不能用map，用map过滤出来的数组元素个数还是跟原数组一样，除非在下面有做处理\r\n      let canuse = this.startOld.filter(item => {\r\n        if (!item.isPaint) return item;\r\n      });\r\n      // 如果不满足两个活跃的点\r\n      if (canuse.length < 2) {\r\n        this.$emit('paintLine', 'You need at least two active points');\r\n        console.log('You need at least two active points');\r\n        return;\r\n      }\r\n      canuse.forEach((item, index, arr) => {\r\n        this.ctx.beginPath();\r\n        if (index < arr.length - 1) {\r\n          this.ctx.moveTo(item.x, item.y);\r\n          this.ctx.lineTo(arr[index + 1].x, arr[index + 1].y);\r\n        } else {\r\n          //画完直线清除数组\r\n          this.startOld = [];\r\n        }\r\n        item.isPaint = true;\r\n        this.ctx.stroke();\r\n      });\r\n    },\r\n    // 画闭合多边形\r\n    paintIrregularPolygon(type = 'Hollow') {\r\n      let canuse = this.startOld.filter(item => {\r\n        if (!item.isPaint) return item;\r\n      });\r\n      // 如果不满足三个活跃的点\r\n      if (canuse.length < 3) {\r\n        this.$emit('paintLine', 'You need at least three active points');\r\n        console.log('You need at least three active points');\r\n        return;\r\n      }\r\n      this.ctx.beginPath();\r\n      this.ctx.moveTo(canuse[0].x, canuse[0].y);\r\n      canuse[0].isPaint = true;\r\n      canuse.forEach((item, index, arr) => {\r\n        if (index !== 0 && index < arr.length) {\r\n          this.ctx.lineTo(item.x, item.y);\r\n        } else {\r\n          //画完直线清除数组\r\n          this.startOld = [];\r\n        }\r\n        item.isPaint = true;\r\n      });\r\n      if (type == 'Hollow') {\r\n        // 画空心\r\n        this.ctx.closePath();\r\n        this.ctx.stroke();\r\n      } else {\r\n        // 画实心\r\n        this.ctx.fill();\r\n      }\r\n    },\r\n    // 初始化画笔\r\n    initpaint() {\r\n      if (this.isEdit) {\r\n        this.startOld = [];\r\n      }\r\n      this.isEdit = false;\r\n      this.isEditing = false;\r\n    },\r\n    // 随便画\r\n    paintRandom() {\r\n      this.touchType = 'Random';\r\n      this.currentStatus = '普通画笔';\r\n      this.initpaint();\r\n    },\r\n    // 画个圆形\r\n    paintCircle() {\r\n      this.touchType = 'PaintCircle';\r\n      this.currentStatus = '圆形画笔';\r\n      this.initpaint();\r\n    },\r\n    // 画个矩形\r\n    paintRectangle() {\r\n      this.touchType = 'PaintRectangle';\r\n      this.currentStatus = '矩形画笔';\r\n      this.initpaint();\r\n    },\r\n    // 写文字\r\n    paintText() {\r\n      // 画文字这块涉及到单行多行文字，文本框不够如何显示文字\r\n      this.touchType = 'PaintText';\r\n      this.currentStatus = '文字画笔';\r\n      this.initpaint();\r\n    },\r\n    // 关闭编辑状态\r\n    closeEdit() {\r\n      // 关闭编辑框同时关闭编辑状态\r\n      this.isEdit = false;\r\n      this.isEditing = false;\r\n      if (this.touchType == 'PaintCircle') {\r\n        this.ctx.beginPath();\r\n        this.ctx.lineWidth = 1;\r\n        this.ctx.strokeStyle = 'black';\r\n        // 如果圆形发生了移动，那么本来要用move的坐标，但是move的坐标并不是圆心坐标，所以不能用，endPoints这个数组永远只有两个元素\r\n        if (\r\n          this.endPoints[0].x == this.endPoints[1].x &&\r\n          this.endPoints[0].y == this.endPoints[1].y\r\n        ) {\r\n          // 如果没有发生移动，那么可以用startOld里面的坐标，也就是一开始圆形定位的时候，立下的圆心\r\n          this.ctx.arc(\r\n            this.startOld[this.startOld.length - 1].x,\r\n            this.startOld[this.startOld.length - 1].y,\r\n            this.circle.offsetWidth / 2,\r\n            0,\r\n            2 * Math.PI\r\n          );\r\n          this.startOld = [];\r\n        } else {\r\n          this.ctx.arc(\r\n            this.move.x,\r\n            this.move.y,\r\n            this.circle.offsetWidth / 2,\r\n            0,\r\n            2 * Math.PI\r\n          );\r\n        }\r\n\r\n        this.endPoints = [];\r\n        this.ctx.stroke();\r\n      }\r\n      // 关闭编辑状态画矩形\r\n      if (this.touchType == 'PaintRectangle') {\r\n        this.ctx.beginPath();\r\n        this.ctx.lineWidth = 1;\r\n        this.ctx.strokeStyle = 'black';\r\n        if (\r\n          this.endPoints[0].x == this.endPoints[1].x &&\r\n          this.endPoints[0].y == this.endPoints[1].y\r\n        ) {\r\n          this.ctx.rect(\r\n            this.rectangle.dataset.x,\r\n            this.rectangle.dataset.y,\r\n            this.rectangle.offsetWidth,\r\n            this.rectangle.offsetHeight\r\n          );\r\n        } else {\r\n          this.ctx.rect(\r\n            this.move.x - this.rectangle.offsetWidth,\r\n            this.move.y - this.rectangle.offsetHeight,\r\n            this.rectangle.offsetWidth,\r\n            this.rectangle.offsetHeight\r\n          );\r\n        }\r\n        this.endPoints = [];\r\n        this.ctx.stroke();\r\n      }\r\n      this.startNew = {};\r\n      // 关闭编辑状态的时候保存历史\r\n      this.currectHistory++;\r\n      let t = new Date();\r\n      if (this.currectHistory == this.history.length) {\r\n        this.history.push({\r\n          time: `${t.getHours() < 10 ? '0' + t.getHours() : t.getHours()}:${\r\n            t.getMinutes() < 10 ? '0' + t.getMinutes() : t.getMinutes()\r\n          }:${t.getSeconds() < 10 ? '0' + t.getSeconds() : t.getSeconds()}`,\r\n          text: this.historyTextArr.find(item => {\r\n            return item.operation == this.touchType;\r\n          }).text,\r\n          data: this.ctx.getImageData(\r\n            0,\r\n            0,\r\n            this.paletteStyleCopy.width - 2 * this.paletteStyleCopy.borderWidth,\r\n            this.paletteStyleCopy.height - 2 * this.paletteStyleCopy.borderWidth\r\n          )\r\n        });\r\n      } else {\r\n        // 如果当前所在位置不是最后一条历史记录，而且还重新操作了，那么后面的历史记录要清除\r\n        this.history = this.history.slice(this.currectHistory).push({\r\n          time: `${t.getHours() < 10 ? '0' + t.getHours() : t.getHours()}:${\r\n            t.getMinutes() < 10 ? '0' + t.getMinutes() : t.getMinutes()\r\n          }:${t.getSeconds() < 10 ? '0' + t.getSeconds() : t.getSeconds()}`,\r\n          text: this.historyTextArr.find(item => {\r\n            return item.operation == this.touchType;\r\n          }).text,\r\n          data: this.ctx.getImageData(\r\n            0,\r\n            0,\r\n            this.paletteStyleCopy.width - 2 * this.paletteStyleCopy.borderWidth,\r\n            this.paletteStyleCopy.height - 2 * this.paletteStyleCopy.borderWidth\r\n          )\r\n        });\r\n      }\r\n    },\r\n    // 橡皮擦\r\n    showEraser() {\r\n      this.isEraser = !this.isEraser;\r\n      if (this.isEraser) {\r\n        this.preCurrentStatus = this.currentStatus;\r\n        this.preTouchType = this.touchType;\r\n        this.currentStatus = '橡皮擦';\r\n        this.touchType = 'Eraser';\r\n      } else {\r\n        this.currentStatus = this.preCurrentStatus;\r\n        this.touchType = this.preTouchType;\r\n      }\r\n    },\r\n    // 撤回上一步，前进下一步\r\n    prevPaint() {\r\n      if (this.currectHistory > 0) {\r\n        //历史记录位置不能小于原来起始位\r\n        this.ctx.clearRect(\r\n          0,\r\n          0,\r\n          this.paletteStyleCopy.width - 2 * this.paletteStyleCopy.borderWidth,\r\n          this.paletteStyleCopy.height - 2 * this.paletteStyleCopy.borderWidth\r\n        );\r\n        --this.currectHistory;\r\n        if (this.currectHistory == 0) {\r\n          this.ctx.putImageData(this.history[0].data, 0, 0);\r\n        } else {\r\n          this.ctx.putImageData(this.history[this.currectHistory].data, 0, 0);\r\n        }\r\n      } else {\r\n        this.currectHistory = 0;\r\n      }\r\n    },\r\n    nextPaint() {\r\n      if (this.currectHistory < this.history.length - 1) {\r\n        this.ctx.clearRect(\r\n          0,\r\n          0,\r\n          this.paletteStyleCopy.width - 2 * this.paletteStyleCopy.borderWidth,\r\n          this.paletteStyleCopy.height - 2 * this.paletteStyleCopy.borderWidth\r\n        );\r\n        this.ctx.putImageData(this.history[++this.currectHistory].data, 0, 0);\r\n      } else {\r\n        this.currectHistory = this.history.length - 1;\r\n      }\r\n    },\r\n    // 跳转到某一条历史记录\r\n    goHistory(index) {\r\n      this.ctx.clearRect(\r\n        0,\r\n        0,\r\n        this.paletteStyleCopy.width - 2 * this.paletteStyleCopy.borderWidth,\r\n        this.paletteStyleCopy.height - 2 * this.paletteStyleCopy.borderWidth\r\n      );\r\n      this.ctx.putImageData(this.history[index].data, 0, 0);\r\n      this.currectHistory = index;\r\n    },\r\n    // 关闭图片\r\n    closeImage() {\r\n      this.lastBase64 = '';\r\n    },\r\n    // 初始化画布\r\n    init() {\r\n      this.cans = this.$refs.palette;\r\n      this.circle = this.$refs.circle;\r\n      this.rectangle = this.$refs.rectangle;\r\n      this.ctx = this.$refs.palette.getContext('2d');\r\n      this.currectHistory++;\r\n      let t = new Date();\r\n      this.history.push({\r\n        time: `${t.getHours() < 10 ? '0' + t.getHours() : t.getHours()}:${\r\n          t.getMinutes() < 10 ? '0' + t.getMinutes() : t.getMinutes()\r\n        }:${t.getSeconds() < 10 ? '0' + t.getSeconds() : t.getSeconds()}`,\r\n        text: '创建画布',\r\n        data: this.ctx.getImageData(\r\n          0,\r\n          0,\r\n          this.paletteStyleCopy.width - 2 * this.paletteStyleCopy.borderWidth,\r\n          this.paletteStyleCopy.height - 2 * this.paletteStyleCopy.borderWidth\r\n        )\r\n      });\r\n      this.$refs.palette_wrapper.addEventListener(\r\n        'touchstart',\r\n        this.startPoint,\r\n        false\r\n      );\r\n      this.$refs.palette_wrapper.addEventListener(\r\n        'mousedown',\r\n        this.startPoint,\r\n        false\r\n      );\r\n      this.$refs.palette_wrapper.addEventListener(\r\n        'touchend',\r\n        this.endPoint,\r\n        false\r\n      );\r\n      this.$refs.palette_wrapper.addEventListener(\r\n        'mouseup',\r\n        this.endPoint,\r\n        false\r\n      );\r\n    },\r\n    // 清除画布\r\n    clearPalette() {\r\n      this.clearTimes++;\r\n      this.ctx.clearRect(\r\n        0,\r\n        0,\r\n        this.paletteStyleCopy.width - 2 * this.paletteStyleCopy.borderWidth,\r\n        this.paletteStyleCopy.height - 2 * this.paletteStyleCopy.borderWidth\r\n      );\r\n      this.startNew = null;\r\n      this.startOld = [];\r\n      this.history = [];\r\n      this.currectHistory = -1;\r\n    },\r\n    // 将画布转为图片\r\n    savePalette(type = 'png') {\r\n      if (type == 'png') {\r\n        this.lastBase64 = this.cans.toDataURL('image/png');\r\n      } else if (type == 'jpeg') {\r\n        this.lastBase64 = this.cans.toDataURL('image/jpeg', 1);\r\n      }\r\n      // 生成图片弹出弹窗\r\n      this.$nextTick(() => {\r\n        let timer = setTimeout(() => {\r\n          this.$refs.resultImg.style[transformKey] = `translate3d(0,0,0)`;\r\n          clearTimeout(timer);\r\n        }, 0);\r\n      });\r\n\r\n      this.$emit('paletteImage', this.lastBase64);\r\n    },\r\n    // 显示编辑画板\r\n    showBar() {\r\n      if (!this.isShowBar) {\r\n        this.$refs.showBar.style[transformKey] = 'translate3d(0,0,0)';\r\n        this.isShowBar = true;\r\n        // 打开编辑弹窗的时候不能对画板进行操作\r\n        this.$refs.palette_wrapper.removeEventListener(\r\n          'touchstart',\r\n          this.startPoint,\r\n          false\r\n        );\r\n        this.$refs.palette_wrapper.removeEventListener(\r\n          'mousedown',\r\n          this.startPoint,\r\n          false\r\n        );\r\n        this.$refs.palette_wrapper.removeEventListener(\r\n          'touchend',\r\n          this.endPoint,\r\n          false\r\n        );\r\n        this.$refs.palette_wrapper.removeEventListener(\r\n          'mouseup',\r\n          this.endPoint,\r\n          false\r\n        );\r\n      } else {\r\n        this.$refs.showBar.style[transformKey] = 'translate3d(0,110%,0)';\r\n        this.isShowBar = false;\r\n        this.$refs.palette_wrapper.addEventListener(\r\n          'touchstart',\r\n          this.startPoint,\r\n          false\r\n        );\r\n        this.$refs.palette_wrapper.addEventListener(\r\n          'mousedown',\r\n          this.startPoint,\r\n          false\r\n        );\r\n        this.$refs.palette_wrapper.addEventListener(\r\n          'touchend',\r\n          this.endPoint,\r\n          false\r\n        );\r\n        this.$refs.palette_wrapper.addEventListener(\r\n          'mouseup',\r\n          this.endPoint,\r\n          false\r\n        );\r\n      }\r\n    },\r\n    // 显示历史记录\r\n    showHistory() {\r\n      // 先关闭编辑画板\r\n      this.showBar();\r\n      if (!this.isHistory) {\r\n        this.$refs.historyBar.style[transformKey] = 'translate3d(0,0,0)';\r\n        this.isHistory = true;\r\n      } else {\r\n        this.$refs.historyBar.style[transformKey] = 'translate3d(100%,0,0)';\r\n        this.isHistory = false;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n* {\r\n  margin: 0px;\r\n}\r\n.palette {\r\n  overflow: hidden;\r\n  user-select: none;\r\n}\r\n.palette_tip {\r\n  position: relative;\r\n  margin: 10px 15px;\r\n  padding: 10px 0px;\r\n  font-size: 24px;\r\n  line-height: 24px;\r\n  font-weight: 600;\r\n  text-align: left;\r\n  border-bottom: 1px solid #eeeeee;\r\n}\r\n.tip_btn {\r\n  position: absolute;\r\n  right: 0px;\r\n  top: 8px;\r\n  border: none;\r\n  padding: 5px;\r\n  border-radius: 20px;\r\n  color: white;\r\n}\r\n.tip_btn:focus {\r\n  outline: none;\r\n}\r\n.palette_wrapper {\r\n  box-sizing: border-box;\r\n  position: relative;\r\n  margin: 0 auto;\r\n  width: 300px;\r\n  height: 150px;\r\n  overflow: hidden;\r\n}\r\n.palette_wrapper .eraser {\r\n  position: absolute;\r\n  left: 0px;\r\n  top: 0px;\r\n  /* width: 20px;\r\n  height: 20px;\r\n  background-color: black; */\r\n  z-index: 3;\r\n}\r\n.palette_wrapper .circle {\r\n  position: relative;\r\n  box-sizing: border-box;\r\n  position: absolute;\r\n  left: 0px;\r\n  top: 0px;\r\n  border-radius: 50%;\r\n  border: 1px solid black;\r\n  outline: 1px solid rgba(0, 0, 0, 0.2);\r\n  z-index: 2;\r\n}\r\n.palette_wrapper .circle span {\r\n  position: absolute;\r\n  right: -10px;\r\n  top: -10px;\r\n  box-sizing: border-box;\r\n  display: block;\r\n  width: 20px;\r\n  height: 20px;\r\n  border-radius: 50%;\r\n  border: 3px solid #fed640;\r\n  background-color: white;\r\n  font-weight: 600;\r\n  color: #fed640;\r\n  line-height: 16px;\r\n  user-select: none;\r\n  cursor: pointer;\r\n}\r\n.palette_wrapper .rectangle {\r\n  box-sizing: border-box;\r\n  position: absolute;\r\n  left: 0px;\r\n  top: 0px;\r\n  border: 1px solid black;\r\n  z-index: 2;\r\n}\r\n.palette_wrapper .rectangle span {\r\n  position: absolute;\r\n  right: -10px;\r\n  top: -10px;\r\n  box-sizing: border-box;\r\n  display: block;\r\n  width: 20px;\r\n  height: 20px;\r\n  border-radius: 50%;\r\n  border: 3px solid #fed640;\r\n  background-color: white;\r\n  font-weight: 600;\r\n  color: #fed640;\r\n  line-height: 16px;\r\n  user-select: none;\r\n  cursor: pointer;\r\n}\r\n.palette_wrapper .text {\r\n  box-sizing: border-box;\r\n  position: absolute;\r\n  left: 0px;\r\n  top: 0px;\r\n  border: 1px solid black;\r\n  z-index: 2;\r\n  overflow: hidden;\r\n}\r\n.palette_wrapper canvas {\r\n  position: absolute;\r\n  left: 0px;\r\n  top: 0px;\r\n  z-index: 1;\r\n}\r\n.palette .showBar {\r\n  position: fixed;\r\n  left: 0px;\r\n  bottom: 0px;\r\n  width: 100%;\r\n  z-index: 99;\r\n  transform: translate3d(0, 110%, 0);\r\n  background-color: rgba(0, 0, 0, 0.4);\r\n  border-top-left-radius: 20px;\r\n  border-top-right-radius: 20px;\r\n  transition: all 0.5s;\r\n}\r\n.palette .showBar .showBar_close {\r\n  position: absolute;\r\n  right: 0px;\r\n  top: -15px;\r\n  box-sizing: border-box;\r\n  width: 30px;\r\n  height: 30px;\r\n  border-radius: 50%;\r\n  border: 4px solid #fed640;\r\n  background-color: rgba(0, 0, 0, 0.4);\r\n  color: #fed640;\r\n  font-size: 20px;\r\n  line-height: 22px;\r\n  cursor: pointer;\r\n}\r\n.palette .showBar .showBar_title {\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n  padding: 10px 0px;\r\n}\r\n.palette .showBar .showBar_wrapper {\r\n  max-height: 400px;\r\n  overflow: auto;\r\n}\r\n.palette .showBar .showBar_wrapper button {\r\n  border: none;\r\n  padding: 5px 15px;\r\n  background-color: #fed640;\r\n  border-radius: 20px;\r\n  color: white;\r\n  float: left;\r\n  margin-right: 5px;\r\n}\r\n.palette .showBar .showBar_wrapper button:focus {\r\n  outline: none;\r\n}\r\n\r\n.palette .showBar .showBar_wrapper span {\r\n  float: right;\r\n  line-height: 28px;\r\n}\r\n.palette .showBar .showBar_wrapper .showBar_item {\r\n  padding: 5px 0px;\r\n  margin: 0px 15px;\r\n  text-align: left;\r\n  overflow: hidden;\r\n  border-bottom: 1px solid #fed640;\r\n}\r\n/* 历史记录 */\r\n.palette .historyBar {\r\n  margin: auto;\r\n  position: fixed;\r\n  left: 0px;\r\n  right: 0px;\r\n  top: 0px;\r\n  bottom: 0px;\r\n  background-color: rgba(0, 0, 0, 0.4);\r\n  z-index: 99;\r\n  transform: translate3d(100%, 0, 0);\r\n  transition: all 0.5s;\r\n}\r\n.palette .historyBar .more {\r\n  margin: 0 auto;\r\n  width: 13px;\r\n  height: 14.5px;\r\n  background-image: url('./more.png');\r\n  background-repeat: no-repeat;\r\n  background-size: 100% 100%;\r\n}\r\n.palette .historyBar .historyBar_close {\r\n  position: absolute;\r\n  right: 0px;\r\n  top: 0px;\r\n  box-sizing: border-box;\r\n  width: 30px;\r\n  height: 30px;\r\n  border-radius: 50%;\r\n  border: 4px solid #fed640;\r\n  background-color: rgba(0, 0, 0, 0.4);\r\n  color: #fed640;\r\n  font-size: 20px;\r\n  line-height: 22px;\r\n  cursor: pointer;\r\n}\r\n.palette .historyBar .historyBar_title {\r\n  margin: 15px;\r\n  padding: 10px 5px;\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n  text-align: left;\r\n  color: #fed640;\r\n  border-bottom: 2px solid #fed640;\r\n}\r\n.palette .historyBar .history_wrapper {\r\n  width: 100%;\r\n  height: 82vh;\r\n  overflow: auto;\r\n}\r\n.palette .historyBar .history_item {\r\n  padding: 5px 15px;\r\n  color: #fed640;\r\n  text-align: left;\r\n}\r\n/* 图片弹窗 */\r\n.palette .images {\r\n  margin: auto;\r\n  position: fixed;\r\n  left: 0px;\r\n  right: 0px;\r\n  top: 0px;\r\n  bottom: 0px;\r\n  background-color: rgba(0, 0, 0, 0.4);\r\n  z-index: 99;\r\n}\r\n.palette .images img {\r\n  margin: auto;\r\n  position: fixed;\r\n  left: 0px;\r\n  right: 0px;\r\n  top: 0px;\r\n  bottom: 0px;\r\n  border: 5px solid #fed640;\r\n  background-color: white;\r\n  z-index: 100;\r\n  transform: translate3d(0, 120%, 0);\r\n  transition: all 0.5s;\r\n}\r\n</style>\r\n","import mod from \"-!../../../build/node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2!../../../build/node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./palette.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../build/node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2!../../../build/node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./palette.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./palette.vue?vue&type=template&id=b1ebfdb0&scoped=true&\"\nimport script from \"./palette.vue?vue&type=script&lang=js&\"\nexport * from \"./palette.vue?vue&type=script&lang=js&\"\nimport style0 from \"./palette.vue?vue&type=style&index=0&id=b1ebfdb0&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../build/node_modules/_vue-loader@15.9.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b1ebfdb0\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\兔展\\\\palette\\\\build\\\\node_modules\\\\_vue-hot-reload-api@2.3.4@vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('b1ebfdb0')) {\n      api.createRecord('b1ebfdb0', component.options)\n    } else {\n      api.reload('b1ebfdb0', component.options)\n    }\n    module.hot.accept(\"./palette.vue?vue&type=template&id=b1ebfdb0&scoped=true&\", function () {\n      api.rerender('b1ebfdb0', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"packages/palette/src/palette.vue\"\nexport default component.exports","/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file (except for modules).\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nexport default function normalizeComponent (\n  scriptExports,\n  render,\n  staticRenderFns,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier, /* server only */\n  shadowMode /* vue-cli only */\n) {\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (render) {\n    options.render = render\n    options.staticRenderFns = staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = 'data-v-' + scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = shadowMode\n      ? function () { injectStyles.call(this, this.$root.$options.shadowRoot) }\n      : injectStyles\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functional component in vue file\n      var originalRender = options.render\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return originalRender(h, context)\n      }\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    }\n  }\n\n  return {\n    exports: scriptExports,\n    options: options\n  }\n}\n","import preventScroll from './util/preventScroll.js';\r\npreventScroll();\r\nimport Palette from './src/palette.vue';\r\nexport default Palette;\r\n"],"sourceRoot":""}